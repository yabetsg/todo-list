(()=>{"use strict";const e=()=>({addButton:document.querySelector(".addButton"),cancelButton:document.querySelectorAll(".cancelButton"),addProjectButton:document.querySelector(".addProjectButton"),addTaskButton:document.querySelector(".addTaskButton"),projectFormContainer:document.querySelector(".projectFormContainer"),todoFormContainer:document.querySelector(".todoFormContainer"),projectList:document.querySelector(".projectList"),projectForm:document.querySelector(".projectForm"),todoForm:document.querySelector(".todoForm"),projectNameInput:document.querySelector(".projectNameInput"),todoTaskInput:document.querySelector(".todoTaskInput"),taskList:document.querySelector(".tasks"),allTaskLists:document.querySelector(".todoTitle"),projectNameContainer:document.querySelector(".projectNameContainer"),mainTitle:document.querySelector(".mainTitle"),inbox:document.getElementById("inbox"),dueDate:document.getElementById("date"),checkIcon:document.getElementsByTagName("p"),deleteButton:document.createElement("button")}),t=e().todoFormContainer,n=e().todoTaskInput,o=e().taskList,a=e().mainTitle,c=e().dueDate,d=new class{constructor(){this.count=0}createTask(){for(let e=0;e<E.length;e++){const t=E[e],d=(T[e],document.createElement("button")),s=document.createElement("input"),r=document.createElement("span"),i=document.createElement("div"),l=document.createElement("div"),u=(document.createElement("i"),document.createElement("p")),m=document.createElement("button");s.type="date",s.classList.add("dateInput"),i.classList.add("leftSide"),l.classList.add("rightSide"),m.classList.add("fa"),m.classList.add("fa-trash"),r.classList.add("taskDueDate");let p=c.value;d.classList.add("todoTitle");const h=n.value;t.title===a.innerText&&(t[`task${this.count}`]=h,""===p&&(p="No Due Date"),t[`date${this.count}`]=p,u.innerText=t[`task${this.count}`],r.innerText=t[`date${this.count}`],i.appendChild(u),l.appendChild(r),l.appendChild(m),d.appendChild(i),d.appendChild(l),o.appendChild(d),this.count++)}t.classList.remove("active"),n.value=""}removeTasks(){for(;o.firstChild;)o.removeChild(o.firstChild)}},s=e().addProjectButton,r=e().projectFormContainer,i=e().addTaskButton,l=e().todoFormContainer,u=e().todoForm,m=e().projectForm,p=e().projectList,h=e().projectNameInput,L=e().taskList,v=e().mainTitle,C=e().cancelButton,k=e().inbox,E=(e().checkIcon,e().todoTaskInput,e().allTaskLists,[]);E.push({title:"Inbox"}),s.addEventListener("click",(()=>{l.classList.remove("active"),r.classList.add("active")})),i.addEventListener("click",(()=>{r.classList.remove("active"),l.classList.add("active")}));const T=[],f=(m.addEventListener("submit",(e=>{d.count=0;const t=document.createElement("button");t.classList.add("projectNameContainer");const n=document.createElement("i"),o=document.createElement("span"),a=h.value;o.innerText=a,t.appendChild(n),t.appendChild(o),p.appendChild(t),E.push({title:a}),r.classList.remove("active"),h.value="",t.classList.contains("projectNameContainer")&&t.addEventListener("click",(e=>{d.removeTasks(),console.log("storage after d:"+JSON.stringify(E));const t=e.target.innerText;v.innerText=t;for(let e=0;e<E.length;e++){const t=E[e];if(t.title===v.innerText){const e=Object.keys(t);for(let n=0;n<e.length;n++)if(null!=t[`task${n}`]){const e=document.createElement("button"),o=document.createElement("span"),a=document.createElement("p"),c=document.createElement("div"),d=document.createElement("div"),s=document.createElement("button");s.classList.add("fa"),s.classList.add("fa-trash"),c.classList.add("leftSide"),d.classList.add("rightSide"),e.classList.add("todoTitle"),o.classList.add("taskDueDate"),a.innerText=t[`task${n}`],o.innerText=t[`date${n}`],c.appendChild(a),d.appendChild(o),d.appendChild(s),e.appendChild(c),e.appendChild(d),L.appendChild(e)}}}f()}))})),()=>{const e=document.querySelectorAll(".fa-trash");if(console.log(e),e[0]){let t,n;e.forEach((e=>{t=e})),t.parentNode,e&&e.forEach((e=>{e.addEventListener("click",(t=>{console.log(t),n=e.parentNode.parentNode,n.remove();for(let e=0;e<E.length;e++){const t=E[e];for(const e in t)t[e]===n.firstChild.textContent&&delete t[e],t[e]===n.lastChild.textContent&&(console.log("?"+n.lastChild.textContent),delete t[e])}}))}))}});u.addEventListener("submit",(()=>{d.createTask(),f()})),C.forEach((e=>{e.addEventListener("click",(()=>{r.classList.remove("active"),l.classList.remove("active")}))})),k.addEventListener("click",(e=>{d.removeTasks(),v.innerText="inbox";const t=e.target.innerText;v.innerText=t;for(let e=0;e<E.length;e++){const t=E[e];if(null!=t){const e=Object.keys(t);for(let n=0;n<e.length;n++)if(null!=t[`date${n}`]){const e=document.createElement("button"),o=document.createElement("span"),a=document.createElement("p");e.classList.add("todoTitle"),o.classList.add("taskDueDate"),a.innerText=t[`task${n}`],o.innerText=t[`date${n}`],e.appendChild(a),e.appendChild(o),L.appendChild(e)}}}}));const y=new Event("click");k.dispatchEvent(y)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YyxRQUM5QmdCLEVBQUl2QyxTQUFTdUIsY0FBYyxLQUNqQ1UsRUFBT1EsVUFBVUMsSUFBSSxhQUNyQk4sRUFBS0ssVUFBVUMsSUFBSSxlQUNuQkgsRUFBRVEsVUFBWWYsRUFBUSxPQUFPdUMsS0FDN0JuQyxFQUFLVyxVQUFZZixFQUFRLE9BQU91QyxLQUNoQ3RDLEVBQU9lLFlBQVlULEdBQ25CTixFQUFPZSxZQUFZWixHQUNuQixFQUFTWSxZQUFZZixFQUN2QixDQUVKLENBQ0YsS0FHRixNQUFNLEVBQVEsSUFBSWdELE1BQU0sU0FDeEJoRSxFQUFNaUUsY0FBYyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL0RPTS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZXZlbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9ICgpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBhZGRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkQnV0dG9uXCIpLFxuICAgIGNhbmNlbEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYW5jZWxCdXR0b25cIiksXG4gICAgYWRkUHJvamVjdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0QnV0dG9uXCIpLFxuICAgIGFkZFRhc2tCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza0J1dHRvblwiKSxcbiAgICBwcm9qZWN0Rm9ybUNvbnRhaW5lcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RGb3JtQ29udGFpbmVyJyksXG4gICAgdG9kb0Zvcm1Db250YWluZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvRm9ybUNvbnRhaW5lcicpLFxuICAgIHByb2plY3RMaXN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdExpc3QnKSxcbiAgICBwcm9qZWN0Rm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RGb3JtJyksXG4gICAgdG9kb0Zvcm06IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvRm9ybScpLFxuICAgIHByb2plY3ROYW1lSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0TmFtZUlucHV0JyksXG4gICAgdG9kb1Rhc2tJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9UYXNrSW5wdXQnKSxcbiAgICB0YXNrTGlzdDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJyksXG4gICAgYWxsVGFza0xpc3RzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb1RpdGxlJyksXG4gICAgcHJvamVjdE5hbWVDb250YWluZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0TmFtZUNvbnRhaW5lcicpLFxuICAgIG1haW5UaXRsZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW5UaXRsZScpLFxuICAgIGluYm94OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5ib3gnKSxcbiAgICBkdWVEYXRlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLFxuICAgIGNoZWNrSWNvbjogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3AnKSxcbiAgICBkZWxldGVCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgc2VsZWN0b3JzIH0gZnJvbSBcIi4vRE9NXCI7XG5pbXBvcnQgeyBzdG9yYWdlICwgaW5ib3hTdG9yYWdlfSBmcm9tIFwiLi9ldmVudFwiO1xuXG5cblxuY29uc3QgdG9kb0Zvcm1Db250YWluZXIgPSBzZWxlY3RvcnMoKS50b2RvRm9ybUNvbnRhaW5lcjtcbmNvbnN0IHRvZG9UYXNrSW5wdXQgPSBzZWxlY3RvcnMoKS50b2RvVGFza0lucHV0O1xuY29uc3QgdGFza0xpc3QgPSBzZWxlY3RvcnMoKS50YXNrTGlzdDtcbmNvbnN0IG1haW5UaXRsZSA9IHNlbGVjdG9ycygpLm1haW5UaXRsZTtcbmNvbnN0IGR1ZURhdGUgPSBzZWxlY3RvcnMoKS5kdWVEYXRlO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb3VudCA9IDA7XG4gIH1cbiAgXG4gIGNyZWF0ZVRhc2soKSB7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBzdG9yYWdlW2ldO1xuICAgICAgY29uc3QgaW5ib3hFbGVtZW50ID0gaW5ib3hTdG9yYWdlW2ldO1xuICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBjb25zdCBsZWZ0U2lkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29uc3QgcmlnaHRTaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgZGF0ZS50eXBlID0gJ2RhdGUnO1xuICAgICAgZGF0ZS5jbGFzc0xpc3QuYWRkKCdkYXRlSW5wdXQnKTtcbiAgICAgIGxlZnRTaWRlLmNsYXNzTGlzdC5hZGQoJ2xlZnRTaWRlJyk7XG4gICAgICByaWdodFNpZGUuY2xhc3NMaXN0LmFkZCgncmlnaHRTaWRlJyk7XG4gICAgICBcbiAgICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdmYScpO1xuICAgICAgZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2ZhLXRyYXNoJyk7XG4gICAgICBcbiAgICAgIFxuICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKCd0YXNrRHVlRGF0ZScpO1xuICAgICAgbGV0IGRhdGVWYWx1ZSA9IGR1ZURhdGUudmFsdWU7XG4gICAgXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgndG9kb1RpdGxlJyk7XG4gICAgICBjb25zdCB0YXNrTmFtZSA9IHRvZG9UYXNrSW5wdXQudmFsdWU7XG4gICAgICBcbiAgICAgIGlmIChlbGVtZW50LnRpdGxlID09PSBtYWluVGl0bGUuaW5uZXJUZXh0KSB7XG4gICAgICAgIGVsZW1lbnRbYHRhc2ske3RoaXMuY291bnR9YF0gPSB0YXNrTmFtZTtcbiAgICAgICBcbiAgICAgICBcbiAgICAgICAgaWYoZGF0ZVZhbHVlPT09Jycpe1xuICAgICAgICAgIGRhdGVWYWx1ZSA9ICdObyBEdWUgRGF0ZSc7XG4gICAgICAgIH0gXG4gICAgICAgIFxuICAgICAgICBlbGVtZW50W2BkYXRlJHt0aGlzLmNvdW50fWBdID0gZGF0ZVZhbHVlO1xuICAgICAgICBwLmlubmVyVGV4dCA9IGVsZW1lbnRbYHRhc2ske3RoaXMuY291bnR9YF07XG4gICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gZWxlbWVudFtgZGF0ZSR7dGhpcy5jb3VudH1gXTtcbiAgICAgIC8vICBkaXYuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgICAgIGxlZnRTaWRlLmFwcGVuZENoaWxkKHApO1xuICAgICAgICByaWdodFNpZGUuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgIHJpZ2h0U2lkZS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQobGVmdFNpZGUpO1xuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQocmlnaHRTaWRlKTtcbiAgICAgICAgdGFza0xpc3QuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgXG4gICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvdW50Kys7XG4gICAgICB9XG4gICAgfVxuICAgIHRvZG9Gb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIHRvZG9UYXNrSW5wdXQudmFsdWUgPSAnJztcbiAgfTtcblxuICByZW1vdmVUYXNrcygpIHtcbiAgICB3aGlsZSAodGFza0xpc3QuZmlyc3RDaGlsZCkge1xuICAgICAgdGFza0xpc3QucmVtb3ZlQ2hpbGQodGFza0xpc3QuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tIFwiLi9ET01cIjtcbmltcG9ydCBUYXNrIGZyb20gXCIuL3Rhc2tcIjtcblxuY29uc3QgdGFzayA9IG5ldyBUYXNrKCk7XG5sZXQgYm9vbCA9IGZhbHNlO1xuLy8gVE9ETzogZml4IGlzc3VlIHdoZXJlIGNsaWNraW5nIGRlbGV0ZSBvbiBhIGR1cGxpY2F0ZSBkdWUgZGF0ZSB3b3VsZCBkZWxldGUgYWxsIHRhc2tzIGFzb2NpYXRlZCB3aXRoIHRoZSBzYW1lIGR1ZSBkYXRlLlxuXG5jb25zdCBwcm9qZWN0QnV0dG9uID0gc2VsZWN0b3JzKCkuYWRkUHJvamVjdEJ1dHRvbjtcbmNvbnN0IHByb2plY3RGb3JtQ29udGFpbmVyID0gc2VsZWN0b3JzKCkucHJvamVjdEZvcm1Db250YWluZXI7XG5jb25zdCBhZGRUYXNrQnV0dG9uID0gc2VsZWN0b3JzKCkuYWRkVGFza0J1dHRvbjtcbmNvbnN0IHRvZG9Gb3JtQ29udGFpbmVyID0gc2VsZWN0b3JzKCkudG9kb0Zvcm1Db250YWluZXI7XG5jb25zdCB0b2RvRm9ybSA9IHNlbGVjdG9ycygpLnRvZG9Gb3JtO1xuY29uc3QgcHJvamVjdEZvcm0gPSBzZWxlY3RvcnMoKS5wcm9qZWN0Rm9ybTtcbmNvbnN0IHByb2plY3RMaXN0ID0gc2VsZWN0b3JzKCkucHJvamVjdExpc3Q7XG5jb25zdCBwcm9qZWN0TmFtZUlucHV0ID0gc2VsZWN0b3JzKCkucHJvamVjdE5hbWVJbnB1dDtcbmNvbnN0IHRhc2tMaXN0ID0gc2VsZWN0b3JzKCkudGFza0xpc3Q7XG5jb25zdCBtYWluVGl0bGUgPSBzZWxlY3RvcnMoKS5tYWluVGl0bGU7XG5jb25zdCBjYW5jZWxCdXR0b24gPSBzZWxlY3RvcnMoKS5jYW5jZWxCdXR0b247XG5jb25zdCBpbmJveCA9IHNlbGVjdG9ycygpLmluYm94O1xuY29uc3QgY2xlYXJUYXNrID0gc2VsZWN0b3JzKCkuY2hlY2tJY29uO1xuY29uc3QgdG9kb1Rhc2tJbnB1dCA9IHNlbGVjdG9ycygpLnRvZG9UYXNrSW5wdXQ7XG5jb25zdCBhbGxUYXNrTGlzdHMgPSBzZWxlY3RvcnMoKS5hbGxUYXNrTGlzdHM7XG5leHBvcnQgY29uc3Qgc3RvcmFnZSA9IFtdO1xuc3RvcmFnZS5wdXNoKHsgdGl0bGU6IFwiSW5ib3hcIiB9KTtcbmV4cG9ydCBjb25zdCBhZGRQcm9qZWN0QnV0dG9uRXZlbnQgPSAoKCkgPT4ge1xuICBwcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgdG9kb0Zvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICBwcm9qZWN0Rm9ybUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICB9KTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBhZGRUYXNrQnV0dG9uRXZlbnQgPSAoKCkgPT4ge1xuICBhZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJvamVjdEZvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB0b2RvRm9ybUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICB9KTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBpbmJveFN0b3JhZ2UgPSBbXTtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RGb3JtRXZlbnQgPSAoKCkgPT4ge1xuICBwcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgdGFzay5jb3VudCA9IDA7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInByb2plY3ROYW1lQ29udGFpbmVyXCIpO1xuICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcbiAgICBjb25zdCB0aXRsZU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHByb2plY3ROYW1lSW5wdXQudmFsdWU7XG5cbiAgICB0aXRsZU5hbWUuaW5uZXJUZXh0ID0gcHJvamVjdE5hbWU7XG4gICAgYnV0dG9uLmFwcGVuZENoaWxkKGljb24pO1xuICAgIGJ1dHRvbi5hcHBlbmRDaGlsZCh0aXRsZU5hbWUpO1xuICAgIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgc3RvcmFnZS5wdXNoKHsgdGl0bGU6IHByb2plY3ROYW1lIH0pO1xuICAgIHByb2plY3RGb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgcHJvamVjdE5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9qZWN0TmFtZUNvbnRhaW5lclwiKSkge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICB0YXNrLnJlbW92ZVRhc2tzKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcInN0b3JhZ2UgYWZ0ZXIgZDpcIisgSlNPTi5zdHJpbmdpZnkoc3RvcmFnZSkpO1xuICAgICAgICBjb25zdCBjbGlja2VkUHJvamVjdFRpdGxlID0gZS50YXJnZXQuaW5uZXJUZXh0O1xuICAgICAgICBtYWluVGl0bGUuaW5uZXJUZXh0ID0gY2xpY2tlZFByb2plY3RUaXRsZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudCA9IHN0b3JhZ2VbaV07XG4gICAgICAgICAgaWYgKGVsZW1lbnQudGl0bGUgPT09IG1haW5UaXRsZS5pbm5lclRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyhlbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgb2JqZWN0S2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudFtgdGFzayR7an1gXSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdFNpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodFNpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnZmEnKTtcbiAgICAgICAgICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnZmEtdHJhc2gnKTtcbiAgICAgICAgICAgICAgICBsZWZ0U2lkZS5jbGFzc0xpc3QuYWRkKCdsZWZ0U2lkZScpO1xuICAgICAgICAgICAgICAgICByaWdodFNpZGUuY2xhc3NMaXN0LmFkZCgncmlnaHRTaWRlJyk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0b2RvVGl0bGVcIik7XG4gICAgICAgICAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKFwidGFza0R1ZURhdGVcIik7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBlbGVtZW50W2B0YXNrJHtqfWBdO1xuICAgICAgICAgICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gZWxlbWVudFtgZGF0ZSR7an1gXTtcbiAgICAgICAgICAgICAgICBsZWZ0U2lkZS5hcHBlbmRDaGlsZChwKTtcbiAgICAgICAgICAgICAgICByaWdodFNpZGUuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgICAgICAgICAgcmlnaHRTaWRlLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGxlZnRTaWRlKTtcbiAgICAgICAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQocmlnaHRTaWRlKTtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZU1ldGhvZCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pKCk7XG5jb25zdCBkZWxldGVNZXRob2QgPSAoKT0+e1xuICAgIGNvbnN0IGRlbGV0ZVRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZhLXRyYXNoXCIpO1xuICAgIGNvbnNvbGUubG9nKGRlbGV0ZVRhc2spO1xuICAgIGlmIChkZWxldGVUYXNrWzBdKSB7XG4gICAgICAgIGxldCBwYXJlbnRzO1xuICAgICAgICBkZWxldGVUYXNrLmZvckVhY2goKGVsZW1lbnQpPT57XG4gICAgICAgIHBhcmVudHMgPSBlbGVtZW50O1xuICAgICAgICAgXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGdyYW5kUGFyZW50ID0gcGFyZW50cy5wYXJlbnROb2RlO1xuICAgICAgIGxldCBncmFuZEdyYW5kUGFyZW50O1xuICAgICAgaWYgKGRlbGV0ZVRhc2spIHtcbiAgICAgICBcbiAgICAgICAgZGVsZXRlVGFzay5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgZ3JhbmRHcmFuZFBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgZ3JhbmRHcmFuZFBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzdG9yYWdlW2ldO1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRba2V5XSA9PT0gZ3JhbmRHcmFuZFBhcmVudC5maXJzdENoaWxkLnRleHRDb250ZW50ICkge1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIGVsZW1lbnRba2V5XTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFtrZXldID09PSBncmFuZEdyYW5kUGFyZW50Lmxhc3RDaGlsZC50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI/XCIrZ3JhbmRHcmFuZFBhcmVudC5sYXN0Q2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIGVsZW1lbnRba2V5XTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB0YXNrRm9ybUV2ZW50ID0gKCgpID0+IHtcbiAgdG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgdGFzay5jcmVhdGVUYXNrKCk7XG4gICAgZGVsZXRlTWV0aG9kKCk7XG4gIH0pO1xufSkoKTtcblxuY2FuY2VsQnV0dG9uLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHByb2plY3RGb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgdG9kb0Zvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgfSk7XG59KTtcblxuaW5ib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gIHRhc2sucmVtb3ZlVGFza3MoKTtcbiAgbWFpblRpdGxlLmlubmVyVGV4dCA9IFwiaW5ib3hcIjtcbiAgY29uc3QgY2xpY2tlZFByb2plY3RUaXRsZSA9IGUudGFyZ2V0LmlubmVyVGV4dDtcbiAgbWFpblRpdGxlLmlubmVyVGV4dCA9IGNsaWNrZWRQcm9qZWN0VGl0bGU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RvcmFnZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBzdG9yYWdlW2ldO1xuICAgIGlmIChlbGVtZW50ICE9IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3Qgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzKGVsZW1lbnQpO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvYmplY3RLZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChlbGVtZW50W2BkYXRlJHtqfWBdICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInRvZG9UaXRsZVwiKTtcbiAgICAgICAgICBzcGFuLmNsYXNzTGlzdC5hZGQoXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICAgICAgICBwLmlubmVyVGV4dCA9IGVsZW1lbnRbYHRhc2ske2p9YF07XG4gICAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBlbGVtZW50W2BkYXRlJHtqfWBdO1xuICAgICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChwKTtcbiAgICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgICAgdGFza0xpc3QuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbmNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KFwiY2xpY2tcIik7XG5pbmJveC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiJdLCJuYW1lcyI6WyJzZWxlY3RvcnMiLCJhZGRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYW5jZWxCdXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkUHJvamVjdEJ1dHRvbiIsImFkZFRhc2tCdXR0b24iLCJwcm9qZWN0Rm9ybUNvbnRhaW5lciIsInRvZG9Gb3JtQ29udGFpbmVyIiwicHJvamVjdExpc3QiLCJwcm9qZWN0Rm9ybSIsInRvZG9Gb3JtIiwicHJvamVjdE5hbWVJbnB1dCIsInRvZG9UYXNrSW5wdXQiLCJ0YXNrTGlzdCIsImFsbFRhc2tMaXN0cyIsInByb2plY3ROYW1lQ29udGFpbmVyIiwibWFpblRpdGxlIiwiaW5ib3giLCJnZXRFbGVtZW50QnlJZCIsImR1ZURhdGUiLCJjaGVja0ljb24iLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImRlbGV0ZUJ1dHRvbiIsImNyZWF0ZUVsZW1lbnQiLCJ0YXNrIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiY291bnQiLCJjcmVhdGVUYXNrIiwiaSIsInN0b3JhZ2UiLCJsZW5ndGgiLCJlbGVtZW50IiwiYnV0dG9uIiwiaW5ib3hTdG9yYWdlIiwiZGF0ZSIsInNwYW4iLCJsZWZ0U2lkZSIsInJpZ2h0U2lkZSIsInAiLCJ0eXBlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0ZVZhbHVlIiwidmFsdWUiLCJ0YXNrTmFtZSIsInRpdGxlIiwiaW5uZXJUZXh0IiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmUiLCJyZW1vdmVUYXNrcyIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInByb2plY3RCdXR0b24iLCJwdXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRlbGV0ZU1ldGhvZCIsImUiLCJpY29uIiwidGl0bGVOYW1lIiwicHJvamVjdE5hbWUiLCJjb250YWlucyIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiY2xpY2tlZFByb2plY3RUaXRsZSIsInRhcmdldCIsIm9iamVjdEtleXMiLCJPYmplY3QiLCJrZXlzIiwiaiIsInVuZGVmaW5lZCIsImRlbGV0ZVRhc2siLCJwYXJlbnRzIiwiZ3JhbmRHcmFuZFBhcmVudCIsImZvckVhY2giLCJwYXJlbnROb2RlIiwia2V5IiwidGV4dENvbnRlbnQiLCJsYXN0Q2hpbGQiLCJFdmVudCIsImRpc3BhdGNoRXZlbnQiXSwic291cmNlUm9vdCI6IiJ9